export DIRENV_WARN_TIMEOUT=20s

eval "$(devenv direnvrc)"

# The use_devenv function supports passing flags to the devenv command
# For example: use devenv --impure --option services.postgres.enable:bool true
use devenv

# If a local .env exists, load it to provide TASK_HERALD_CONFIG for local runs
if test -f ./.env
  # shellcheck disable=SC1090
  source ./.env
end

# If TASK_HERALD_CONFIG isn't set, and a repo-local config.yaml exists, use it
if not set -q TASK_HERALD_CONFIG
  if test -f ./config.yaml
    set -x TASK_HERALD_CONFIG ./config.yaml
  end
end
